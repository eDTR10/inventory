import{b as r}from"./index-f8fbd2fa.js";const g="1OErW9xPXiyVjg2gnO0kOn-fyg3A5bg7gW0-2b7GZHD8",y="logs",f=()=>{const t=localStorage.getItem("user_email");return t&&t.trim()?t:"Unknown User"},A=t=>[t.user,t.action,t.date_time,t.changes],d=async(t,e,n)=>{try{const o={user:n||f(),action:t,date_time:new Date().toISOString(),changes:e},a=A(o);await r.post(`${g}/values/${y}:append?valueInputOption=RAW`,{values:[a]}),console.log("ðŸ“ Log entry added:",o)}catch(o){console.error("âœ— Error adding log entry:",o)}},O=async()=>{try{const t=await r.get(`${g}/values/${y}`);if(!(t.data.values&&t.data.values.length>0)){const n=[["user","action","date_time","changes"]];await r.put(`${g}/values/${y}?valueInputOption=RAW`,{values:n}),console.log("âœ“ Logs sheet initialized with headers")}}catch(t){console.error("âœ— Error initializing logs sheet:",t)}},s="1OErW9xPXiyVjg2gnO0kOn-fyg3A5bg7gW0-2b7GZHD8",i="2026-01-14",x=(t,e)=>({id:String(e),itemName:t[0]||"",image:t[1]||"",quantity:parseInt(t[2])||0}),h=t=>[t.itemName,t.image||"",String(t.quantity)],u=async()=>{try{const e=(await r.get(`${s}/values/${i}?valueRenderOption=FORMATTED_VALUE`)).data.values;if(!e||e.length<=1)return console.log("No inventory data found"),[];const n=e.slice(1).map((o,a)=>x(o,a+1));return console.log("âœ“ Fetched",n.length,"inventory items"),n}catch(t){throw console.error("âœ— Error fetching inventory items:",t),t}},w=async t=>{try{return(await u()).find(o=>o.itemName.toLowerCase()===t.toLowerCase())||null}catch(e){throw console.error("âœ— Error fetching item by name:",e),e}},D=async t=>{try{const e=h(t);return await r.post(`${s}/values/${i}:append?valueInputOption=RAW`,{values:[e]}),console.log("âœ“ Item added successfully:",t.itemName),await d("CREATE",`Added item: ${t.itemName}, Quantity: ${t.quantity}${t.image?`, Image: ${t.image}`:""}`),t}catch(e){throw console.error("âœ— Error adding inventory item:",e),e}},R=async t=>{try{const e=t.map(o=>h(o));await r.post(`${s}/values/${i}:append?valueInputOption=RAW`,{values:e}),console.log("âœ“ Added",t.length,"items successfully");const n=t.map(o=>o.itemName).join(", ");await d("CREATE_BATCH",`Added ${t.length} items: ${n}`)}catch(e){throw console.error("âœ— Error adding multiple items:",e),e}},m=async(t,e)=>{try{const n=await u(),o=n.findIndex(l=>l.itemName.toLowerCase()===t.toLowerCase());if(o===-1)throw new Error(`Item "${t}" not found`);const a=o+2,c=n[o],I={...c,...e},p=h(I),$=`${i}!A${a}:C${a}`;await r.put(`${s}/values/${$}?valueInputOption=RAW`,{values:[p]}),console.log("âœ“ Item updated successfully:",t);const v=Object.entries(e).map(([l,E])=>`${l}: ${c[l]} â†’ ${E}`).join(", ");await d("UPDATE",`Updated item: ${t}. Changes: ${v}`)}catch(n){throw console.error("âœ— Error updating inventory item:",n),n}},T=async(t,e=1)=>{try{const n=await w(t);if(!n)throw new Error(`Item "${t}" not found`);await m(t,{quantity:n.quantity+e}),console.log(`âœ“ Quantity increased for "${t}" by ${e}`)}catch(n){throw console.error("âœ— Error increasing quantity:",n),n}},L=async(t,e=1)=>{try{const n=await w(t);if(!n)throw new Error(`Item "${t}" not found`);const o=Math.max(0,n.quantity-e);await m(t,{quantity:o}),console.log(`âœ“ Quantity decreased for "${t}" by ${e}`)}catch(n){throw console.error("âœ— Error decreasing quantity:",n),n}},b=async t=>{try{const e=await u(),n=e.findIndex(c=>c.itemName.toLowerCase()===t.toLowerCase());if(n===-1)throw new Error(`Item "${t}" not found`);const o=e[n],a=n+2;await r.post(`${s}/batchUpdate`,{requests:[{deleteDimension:{range:{sheetId:0,dimension:"ROWS",startIndex:a-1,endIndex:a}}}]}),console.log("âœ“ Item deleted successfully:",t),await d("DELETE",`Deleted item: ${t}, Quantity: ${o.quantity}${o.image?`, Image: ${o.image}`:""}`)}catch(e){throw console.error("âœ— Error deleting inventory item:",e),e}},q=async()=>{try{const t=await u();if(t.length===0){console.log("Inventory is already empty");return}await r.post(`${s}/batchUpdate`,{requests:[{deleteDimension:{range:{sheetId:0,dimension:"ROWS",startIndex:1,endIndex:t.length+1}}}]}),console.log("âœ“ All inventory items cleared")}catch(t){throw console.error("âœ— Error clearing inventory:",t),t}},C=async()=>{try{const t=await r.get(`${s}/values/${i}`);if(!(t.data.values&&t.data.values.length>0)){const n=[["Item Name","Image","Quantity"]];await r.put(`${s}/values/${i}?valueInputOption=RAW`,{values:n}),console.log("âœ“ Sheet initialized with headers")}await O()}catch(t){throw console.error("âœ— Error initializing sheet:",t),t}};export{w as a,D as b,R as c,L as d,b as e,q as f,u as g,C as h,T as i,m as u};
