import{d as u,r as l,j as q,e as D}from"./index-9cad157e.js";const v="1OErW9xPXiyVjg2gnO0kOn-fyg3A5bg7gW0-2b7GZHD8",b="logs",k=()=>{const e=localStorage.getItem("user_email");return e&&e.trim()?e:"Unknown User"},L=e=>[e.user,e.action,e.date_time,e.changes],w=async(e,t,a)=>{try{const r={user:a||k(),action:e,date_time:new Date().toISOString(),changes:t},d=L(r);await u.post(`${v}/values/${b}:append?valueInputOption=RAW`,{values:[d]}),console.log("ðŸ“ Log entry added:",r)}catch(r){console.error("âœ— Error adding log entry:",r)}},_=async()=>{try{const e=await u.get(`${v}/values/${b}`);if(!(e.data.values&&e.data.values.length>0)){const a=[["user","action","date_time","changes"]];await u.put(`${v}/values/${b}?valueInputOption=RAW`,{values:a}),console.log("âœ“ Logs sheet initialized with headers")}}catch(e){console.error("âœ— Error initializing logs sheet:",e)}},g="1OErW9xPXiyVjg2gnO0kOn-fyg3A5bg7gW0-2b7GZHD8",m="2026-01-14",F=(e,t)=>({id:String(t),itemName:e[0]||"",image:e[1]||"",quantity:parseInt(e[2])||0}),A=e=>[e.itemName,e.image||"",String(e.quantity)],I=async()=>{try{const t=(await u.get(`${g}/values/${m}?valueRenderOption=FORMATTED_VALUE`)).data.values;if(!t||t.length<=1)return console.log("No inventory data found"),[];const a=t.slice(1).map((r,d)=>F(r,d+1));return console.log("âœ“ Fetched",a.length,"inventory items"),a}catch(e){throw console.error("âœ— Error fetching inventory items:",e),e}},x=async e=>{try{return(await I()).find(r=>r.itemName.toLowerCase()===e.toLowerCase())||null}catch(t){throw console.error("âœ— Error fetching item by name:",t),t}},Q=async e=>{try{const t=A(e);return await u.post(`${g}/values/${m}:append?valueInputOption=RAW`,{values:[t]}),console.log("âœ“ Item added successfully:",e.itemName),await w("CREATE",`Added item: ${e.itemName}, Quantity: ${e.quantity}${e.image?`, Image: ${e.image}`:""}`),e}catch(t){throw console.error("âœ— Error adding inventory item:",t),t}},W=async e=>{try{const t=e.map(r=>A(r));await u.post(`${g}/values/${m}:append?valueInputOption=RAW`,{values:t}),console.log("âœ“ Added",e.length,"items successfully");const a=e.map(r=>r.itemName).join(", ");await w("CREATE_BATCH",`Added ${e.length} items: ${a}`)}catch(t){throw console.error("âœ— Error adding multiple items:",t),t}},C=async(e,t)=>{try{const a=await I(),r=a.findIndex(y=>y.itemName.toLowerCase()===e.toLowerCase());if(r===-1)throw new Error(`Item "${e}" not found`);const d=r+2,s=a[r],c={...s,...t},f=A(c),p=`${m}!A${d}:C${d}`;await u.put(`${g}/values/${p}?valueInputOption=RAW`,{values:[f]}),console.log("âœ“ Item updated successfully:",e);const E=Object.entries(t).map(([y,$])=>`${y}: ${s[y]} â†’ ${$}`).join(", ");await w("UPDATE",`Updated item: ${e}. Changes: ${E}`)}catch(a){throw console.error("âœ— Error updating inventory item:",a),a}},U=async(e,t=1)=>{try{const a=await x(e);if(!a)throw new Error(`Item "${e}" not found`);await C(e,{quantity:a.quantity+t}),console.log(`âœ“ Quantity increased for "${e}" by ${t}`),await w("ADD_QUANTITY",`Added ${t} to ${e}. New quantity: ${a.quantity+t}`)}catch(a){throw console.error("âœ— Error increasing quantity:",a),a}},j=async(e,t=1)=>{try{const a=await x(e);if(!a)throw new Error(`Item "${e}" not found`);const r=Math.max(0,a.quantity-t);await C(e,{quantity:r}),console.log(`âœ“ Quantity decreased for "${e}" by ${t}`),await w("REMOVE_QUANTITY",`Removed ${t} from ${e}. New quantity: ${r}`)}catch(a){throw console.error("âœ— Error decreasing quantity:",a),a}},z=async e=>{try{const t=await I(),a=t.findIndex(s=>s.itemName.toLowerCase()===e.toLowerCase());if(a===-1)throw new Error(`Item "${e}" not found`);const r=t[a],d=a+2;await u.post(`${g}/batchUpdate`,{requests:[{deleteDimension:{range:{sheetId:0,dimension:"ROWS",startIndex:d-1,endIndex:d}}}]}),console.log("âœ“ Item deleted successfully:",e),await w("DELETE",`Deleted item: ${e}, Quantity: ${r.quantity}${r.image?`, Image: ${r.image}`:""}`)}catch(t){throw console.error("âœ— Error deleting inventory item:",t),t}},H=async()=>{try{const e=await I();if(e.length===0){console.log("Inventory is already empty");return}await u.post(`${g}/batchUpdate`,{requests:[{deleteDimension:{range:{sheetId:0,dimension:"ROWS",startIndex:1,endIndex:e.length+1}}}]}),console.log("âœ“ All inventory items cleared")}catch(e){throw console.error("âœ— Error clearing inventory:",e),e}},M=async()=>{try{const e=await u.get(`${g}/values/${m}`);if(!(e.data.values&&e.data.values.length>0)){const a=[["Item Name","Image","Quantity"]];await u.put(`${g}/values/${m}?valueInputOption=RAW`,{values:a}),console.log("âœ“ Sheet initialized with headers")}await _()}catch(e){throw console.error("âœ— Error initializing sheet:",e),e}},G=()=>{const[e,t]=l.useState([]),[a,r]=l.useState(!1),[d,s]=l.useState(null),c=l.useCallback(async()=>{r(!0),s(null);try{const n=await I();return t(n),n}catch(n){const o=n instanceof Error?n.message:"Failed to fetch items";throw s(o),n}finally{r(!1)}},[]),f=l.useCallback(async n=>{s(null);try{return await x(n)}catch(o){const i=o instanceof Error?o.message:"Failed to get item";throw s(i),o}},[]),p=l.useCallback(async n=>{s(null);try{return await Q(n),await c(),n}catch(o){const i=o instanceof Error?o.message:"Failed to add item";throw s(i),o}},[c]),E=l.useCallback(async n=>{s(null);try{await W(n),await c()}catch(o){const i=o instanceof Error?o.message:"Failed to add items";throw s(i),o}},[c]),y=l.useCallback(async(n,o)=>{s(null);try{await C(n,o),await c()}catch(i){const h=i instanceof Error?i.message:"Failed to update item";throw s(h),i}},[c]),$=l.useCallback(async(n,o=1)=>{s(null);try{await U(n,o),await c()}catch(i){const h=i instanceof Error?i.message:"Failed to increase quantity";throw s(h),i}},[c]),O=l.useCallback(async(n,o=1)=>{s(null);try{await j(n,o),await c()}catch(i){const h=i instanceof Error?i.message:"Failed to decrease quantity";throw s(h),i}},[c]),S=l.useCallback(async n=>{s(null);try{await z(n),await c()}catch(o){const i=o instanceof Error?o.message:"Failed to delete item";throw s(i),o}},[c]),R=l.useCallback(async()=>{s(null);try{await H(),t([])}catch(n){const o=n instanceof Error?n.message:"Failed to clear inventory";throw s(o),n}},[]),T=l.useCallback(async()=>{s(null);try{await M()}catch(n){const o=n instanceof Error?n.message:"Failed to initialize sheet";throw s(o),n}},[]);return{items:e,loading:a,error:d,fetchItems:c,getItem:f,addItem:p,addItems:E,updateItem:y,addQuantity:$,removeQuantity:O,deleteItem:S,clearAll:R,initSheet:T}},N=l.forwardRef(({className:e,type:t,...a},r)=>q.jsx("input",{type:t,className:D("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...a}));N.displayName="Input";export{N as I,G as u};
