import{d as u,r as l,j as q,e as D}from"./index-0c8abd0e.js";const $="1OErW9xPXiyVjg2gnO0kOn-fyg3A5bg7gW0-2b7GZHD8",b="logs",L=()=>{const e=localStorage.getItem("user_email");return e&&e.trim()?e:"Unknown User"},T=e=>[e.user,e.action,e.date_time,e.changes],I=async(e,t,a)=>{try{const o={user:a||L(),action:e,date_time:new Date().toISOString(),changes:t},d=T(o);await u.post(`${$}/values/${b}:append?valueInputOption=RAW`,{values:[d]}),console.log("ðŸ“ Log entry added:",o)}catch(o){console.error("âœ— Error adding log entry:",o)}},F=async()=>{try{const e=await u.get(`${$}/values/${b}`);if(!(e.data.values&&e.data.values.length>0)){const a=[["user","action","date_time","changes"]];await u.put(`${$}/values/${b}?valueInputOption=RAW`,{values:a}),console.log("âœ“ Logs sheet initialized with headers")}}catch(e){console.error("âœ— Error initializing logs sheet:",e)}},g="1OErW9xPXiyVjg2gnO0kOn-fyg3A5bg7gW0-2b7GZHD8",m="2026-01-14",W=(e,t)=>({id:String(t),itemName:e[0]||"",image:e[1]||"",quantity:parseInt(e[2])||0}),x=e=>[e.itemName,e.image||"",String(e.quantity)],h=async()=>{try{const t=(await u.get(`${g}/values/${m}?valueRenderOption=FORMATTED_VALUE`)).data.values;if(!t||t.length<=1)return console.log("No inventory data found"),[];const a=t.slice(1).map((o,d)=>W(o,d+1));return console.log("âœ“ Fetched",a.length,"inventory items"),a}catch(e){throw console.error("âœ— Error fetching inventory items:",e),e}},A=async e=>{try{return(await h()).find(o=>o.itemName.toLowerCase()===e.toLowerCase())||null}catch(t){throw console.error("âœ— Error fetching item by name:",t),t}},_=async e=>{try{const t=x(e);return await u.post(`${g}/values/${m}:append?valueInputOption=RAW`,{values:[t]}),console.log("âœ“ Item added successfully:",e.itemName),await I("CREATE",`Added item: ${e.itemName}, Quantity: ${e.quantity}${e.image?`, Image: ${e.image}`:""}`),e}catch(t){throw console.error("âœ— Error adding inventory item:",t),t}},Q=async e=>{try{const t=e.map(o=>x(o));await u.post(`${g}/values/${m}:append?valueInputOption=RAW`,{values:t}),console.log("âœ“ Added",e.length,"items successfully");const a=e.map(o=>o.itemName).join(", ");await I("CREATE_BATCH",`Added ${e.length} items: ${a}`)}catch(t){throw console.error("âœ— Error adding multiple items:",t),t}},C=async(e,t)=>{try{const a=await h(),o=a.findIndex(y=>y.itemName.toLowerCase()===e.toLowerCase());if(o===-1)throw new Error(`Item "${e}" not found`);const d=o+2,s=a[o],c={...s,...t},f=x(c),p=`${m}!A${d}:C${d}`;await u.put(`${g}/values/${p}?valueInputOption=RAW`,{values:[f]}),console.log("âœ“ Item updated successfully:",e);const E=Object.entries(t).map(([y,v])=>`${y}: ${s[y]} â†’ ${v}`).join(", ");await I("UPDATE",`Updated item: ${e}. Changes: ${E}`)}catch(a){throw console.error("âœ— Error updating inventory item:",a),a}},j=async(e,t=1)=>{try{const a=await A(e);if(!a)throw new Error(`Item "${e}" not found`);await C(e,{quantity:a.quantity+t}),console.log(`âœ“ Quantity increased for "${e}" by ${t}`)}catch(a){throw console.error("âœ— Error increasing quantity:",a),a}},U=async(e,t=1)=>{try{const a=await A(e);if(!a)throw new Error(`Item "${e}" not found`);const o=Math.max(0,a.quantity-t);await C(e,{quantity:o}),console.log(`âœ“ Quantity decreased for "${e}" by ${t}`)}catch(a){throw console.error("âœ— Error decreasing quantity:",a),a}},z=async e=>{try{const t=await h(),a=t.findIndex(s=>s.itemName.toLowerCase()===e.toLowerCase());if(a===-1)throw new Error(`Item "${e}" not found`);const o=t[a],d=a+2;await u.post(`${g}/batchUpdate`,{requests:[{deleteDimension:{range:{sheetId:0,dimension:"ROWS",startIndex:d-1,endIndex:d}}}]}),console.log("âœ“ Item deleted successfully:",e),await I("DELETE",`Deleted item: ${e}, Quantity: ${o.quantity}${o.image?`, Image: ${o.image}`:""}`)}catch(t){throw console.error("âœ— Error deleting inventory item:",t),t}},H=async()=>{try{const e=await h();if(e.length===0){console.log("Inventory is already empty");return}await u.post(`${g}/batchUpdate`,{requests:[{deleteDimension:{range:{sheetId:0,dimension:"ROWS",startIndex:1,endIndex:e.length+1}}}]}),console.log("âœ“ All inventory items cleared")}catch(e){throw console.error("âœ— Error clearing inventory:",e),e}},M=async()=>{try{const e=await u.get(`${g}/values/${m}`);if(!(e.data.values&&e.data.values.length>0)){const a=[["Item Name","Image","Quantity"]];await u.put(`${g}/values/${m}?valueInputOption=RAW`,{values:a}),console.log("âœ“ Sheet initialized with headers")}await F()}catch(e){throw console.error("âœ— Error initializing sheet:",e),e}},P=()=>{const[e,t]=l.useState([]),[a,o]=l.useState(!1),[d,s]=l.useState(null),c=l.useCallback(async()=>{o(!0),s(null);try{const n=await h();return t(n),n}catch(n){const r=n instanceof Error?n.message:"Failed to fetch items";throw s(r),n}finally{o(!1)}},[]),f=l.useCallback(async n=>{s(null);try{return await A(n)}catch(r){const i=r instanceof Error?r.message:"Failed to get item";throw s(i),r}},[]),p=l.useCallback(async n=>{s(null);try{return await _(n),await c(),n}catch(r){const i=r instanceof Error?r.message:"Failed to add item";throw s(i),r}},[c]),E=l.useCallback(async n=>{s(null);try{await Q(n),await c()}catch(r){const i=r instanceof Error?r.message:"Failed to add items";throw s(i),r}},[c]),y=l.useCallback(async(n,r)=>{s(null);try{await C(n,r),await c()}catch(i){const w=i instanceof Error?i.message:"Failed to update item";throw s(w),i}},[c]),v=l.useCallback(async(n,r=1)=>{s(null);try{await j(n,r),await c()}catch(i){const w=i instanceof Error?i.message:"Failed to increase quantity";throw s(w),i}},[c]),O=l.useCallback(async(n,r=1)=>{s(null);try{await U(n,r),await c()}catch(i){const w=i instanceof Error?i.message:"Failed to decrease quantity";throw s(w),i}},[c]),S=l.useCallback(async n=>{s(null);try{await z(n),await c()}catch(r){const i=r instanceof Error?r.message:"Failed to delete item";throw s(i),r}},[c]),R=l.useCallback(async()=>{s(null);try{await H(),t([])}catch(n){const r=n instanceof Error?n.message:"Failed to clear inventory";throw s(r),n}},[]),k=l.useCallback(async()=>{s(null);try{await M()}catch(n){const r=n instanceof Error?n.message:"Failed to initialize sheet";throw s(r),n}},[]);return{items:e,loading:a,error:d,fetchItems:c,getItem:f,addItem:p,addItems:E,updateItem:y,addQuantity:v,removeQuantity:O,deleteItem:S,clearAll:R,initSheet:k}},N=l.forwardRef(({className:e,type:t,...a},o)=>q.jsx("input",{type:t,className:D("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:o,...a}));N.displayName="Input";export{N as I,P as u};
