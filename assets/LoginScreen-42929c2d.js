import{c as k,g as S,u as E,i as L,r as d,j as e,B as g,G as p}from"./index-efbfe6e1.js";import{I as f}from"./input-42571c0d.js";const A=k("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),I=()=>{const{login:j,loginWithEmail:b,error:u,isLoading:a}=S(),x=E(),n=L(),[i,v]=d.useState(""),[c,N]=d.useState(""),[o,y]=d.useState(!0),m=async t=>{var r,l;try{if(t.credential){await j(t.credential);const s=((l=(r=n.state)==null?void 0:r.from)==null?void 0:l.pathname)||n.pathname;s&&s!=="/inventory/home"&&x(s,{replace:!0})}}catch(s){console.error("Login failed:",s)}},h=()=>{console.error("Google Sign-In failed")},w=async t=>{var r,l;t.preventDefault();try{await b(i,c);const s=((l=(r=n.state)==null?void 0:r.from)==null?void 0:l.pathname)||n.pathname;s&&s!=="/inventory/home"&&x(s,{replace:!0})}catch(s){console.error("Email login failed:",s)}};return e.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gradient-to-br from-background to-background/80",children:e.jsxs("div",{className:"text-center space-y-6 p-8 max-w-md w-full",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold mb-2",children:"Access Required"}),e.jsxs("p",{className:"text-lg text-muted-foreground",children:["Welcome to DICT Misamis Oriental ",e.jsx("br",{}),"  Inventory System."]})]}),e.jsx("div",{className:"bg-muted p-6 rounded-lg space-y-3 text-sm",children:e.jsxs("ul",{className:"text-left space-y-2",children:[e.jsx("li",{children:"âœ“ Please authenticate to access the inventory features."}),e.jsx("li",{children:"âœ“ Your account will be created automatically on first sign-in using Google."})]})}),u&&e.jsxs("div",{className:"flex items-start gap-2 bg-red-50 dark:bg-red-950 p-4 rounded-lg",children:[e.jsx(A,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-red-700 dark:text-red-200 text-left",children:u})]}),o?e.jsxs(e.Fragment,{children:[e.jsxs("form",{onSubmit:w,className:"space-y-4",children:[e.jsx(f,{type:"email",placeholder:"Email",value:i,onChange:t=>v(t.target.value),disabled:a,required:!0}),e.jsx(f,{type:"password",placeholder:"Password",value:c,onChange:t=>N(t.target.value),disabled:a,required:!0}),e.jsx(g,{type:"submit",className:"w-full",disabled:a||!i||!c,children:a?"Signing in...":"Sign in"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("span",{className:"w-full border-t"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or"})})]}),e.jsx("div",{className:"flex flex-col items-center gap-2",children:a?e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground py-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-current"}),e.jsx("span",{children:"Authenticating..."})]}):e.jsx(p,{onSuccess:m,onError:h,text:"signin_with",size:"large",theme:"outline"})})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex justify-center",children:a?e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-current"}),e.jsx("span",{children:"Authenticating..."})]}):e.jsx(p,{onSuccess:m,onError:h,useOneTap:!0,text:"signin_with",size:"large",theme:"outline"})}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("span",{className:"w-full border-t"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or"})})]}),e.jsx(g,{onClick:()=>y(!0),variant:"outline",className:"w-full",disabled:a,children:"Sign in with Email"})]}),e.jsx("div",{className:"bg-blue-50 dark:bg-blue-950 p-4 rounded text-xs text-left",children:e.jsxs("p",{className:"text-blue-900 dark:text-blue-100",children:[e.jsx("span",{className:"font-semibold",children:"ðŸ’¡ Tip:"})," ",o?"Use your registered email and password.":"Make sure pop-ups are enabled for this site."]})}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Your data is secure and authenticated via ",o?"secure token":"Google OAuth2","."]})]})})};export{I as L};
